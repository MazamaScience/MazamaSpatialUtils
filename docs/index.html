<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spatial Data Download and Utility Functions • MazamaSpatialUtils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Spatial Data Download and Utility Functions">
<meta property="og:description" content="A suite of conversion scripts to create internally standardized
    spatial polygons data frames. Utility scripts use these data sets to return
    values such as country, state, timezone, watershed, etc. associated with a
    set of longitude/latitude pairs. (They also make cool maps.)">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">MazamaSpatialUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/MazamaSpatialUtils.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/examples/ebolamap.html">Ebola Map Example</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/MazamaSpatialUtils">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<p>title: “MazamaSpatialUtils” pagetitle: MazamaSpatialUtils —</p>
<p><a href="https://cran.r-project.org/package=MazamaSpatialUtils"><img src="http://www.r-pkg.org/badges/version/MazamaSpatialUtils" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=MazamaSpatialUtils"><img src="http://cranlogs.r-pkg.org/badges/MazamaSpatialUtils" alt="Downloads"></a> <a href="https://travis-ci.org/MazamaScience/MazamaSpatialUtils"><img src="https://travis-ci.org/MazamaScience/MazamaSpatialUtils.svg?branch=master" alt="Build Status"></a></p>
<div id="mazamaspatialutils" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mazamaspatialutils" class="anchor"></a>MazamaSpatialUtils</h1></div>
<pre><code>A suite of conversion scripts to create internally standardized spatial
polygons dataframes. Utility scripts use these datasets to return values such
as country, state, timezone, watershed, etc. associated with a set of 
longitude/latitude pairs. (They also make cool maps.)</code></pre>
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>The MazamaSpatialUtils package was created by MazamaScience to regularize our work with spatial data. The sp, rgdal and maptools packages have made it much easier to work with spatial data found in shapefiles. Many sources of shapefile data are available and can be used to make beautiful maps in R. Unfortunately, the data attached to these datasets, even when fairly complete, often lacks standardized identifiers such as the ISO 3166-1 alpha-2 encodings for countries. Maddeningly, even when these ISO codes are used, the dataframe column in which they are stored does not have a standardized name. It may be called ISO or ISO2 or alpha or COUNTRY or any of a dozen other names we have seen.</p>
<p>While many mapping packages provide ‘natural’ naming of countries, those who wish to develop operational, GIS-like systems need something that is both standardized and language-independent. The ISO 3166-1 alpha-2 encodings have emerged as the defacto standard for this sort of work. In similar fashion, ISO 3166-2 alpha-2 encodings are available for the next administrative level down – state/province/oblast, etc.. For timezones, the defacto standard is the set of Olson timezones used in all UNIX systems.</p>
<p>The main goal of this package is to create an internally standardized set of spatial data that we can use in various projects. Along with three built-in datasets, this package provides ‘convert~’ functions for other spatial datasets that we currently use. These convert functions all follow the same recipe:</p>
<ul>
<li>download spatial data in shapefile format into a standard directory</li>
<li>convert shapefile data into a sp SpatialPolygonsDataFrame</li>
<li>modify the dataframe in the <code>@data</code> slot so that it adheres to package internal standards</li>
</ul>
<p>Other datasets can be added following the same procedure.</p>
<p>The ‘package internal standards’ are very simple. Every spatial dataset will have at least one of the following, consistently named columns of data:</p>
<ul>
<li>
<code>polygonID</code> – unique identifier associated with each polygon</li>
<li>
<code>countryCode</code> – ISO 3166-1 alpha-2</li>
<li>
<code>stateCode</code> – ISO 3166-2 alpha-2</li>
<li>
<code>timezone</code> – Olson timezone</li>
</ul>
<p>If another column contains this data, that column must be renamed or duplicated with the internally standardized name. This simple level of consistency makes it possible to generate maps for any data that is ISO encoded. It also makes it possible to create functions that return the country, state or timezone associated with a set of locations.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>This package is designed to be used with <a href="https://cran.r-project.org">R</a> (&gt;= 3.1.0) and <a href="http://rstudio.com">RStudio</a> so make sure you have those installed first.</p>
<p>Users can use the <strong>devtools</strong> package to install the latest version of the package which may have new features that are not yet available on CRAN:</p>
<pre><code><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">devtools::install_github('mazamascience/MazamaSpatialUtils', build_vignettes=TRUE)</a></code></pre>
</div>
<div id="spatial-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#spatial-datasets" class="anchor"></a>Spatial Datasets</h2>
<div id="package-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#package-datasets" class="anchor"></a>Package Datasets</h3>
<p>The package comes with the following simplified spatial spatial datasets:</p>
<pre><code> * 276K data/SimpleCountries.RData
 * 2.1M data/SimpleCountriesEEZ.RData
 * 1.1M data/SimpleTimezones.RData</code></pre>
<p>These datasets allow you to work with low-resolution country outlines and timezones.</p>
</div>
<div id="core-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#core-datasets" class="anchor"></a>Core Datasets</h3>
<p>Additional datasets are available at <a href="http://mazamascience.com/RData/Spatial/" class="uri">http://mazamascience.com/RData/Spatial/</a> and can be loaded with the following commands:</p>
<pre><code><a href="https://rdrr.io/r/base/files2.html"># Create a location where large spatial datasets will be stored
dir.create('~/Data/Spatial', recursive = TRUE)

# Tell the package about this location
setSpatialDataDir('~/Data/Spatial')

# Install core spatial data
installSpatialData()</a></code></pre>
<p>Datasets included in the core set include:</p>
<pre><code> * 2.1M EEZCountries.RData
 *  15M NaturalEarthAdm1.RData
 *  61M OSMTimezones.RData
 * 3.0M OSMTimezones_05.RData
 * 3.6M TMWorldBorders.RData
 *  48MTerrestrialEcoregions.RData
 * 3.5M TerrestrialEcoregions_05.RData
 * 7.5M USCensus115thCongress.RData
 *  17M USCensusCounties.RData
 * 4.6M USCensusStates.RData
 * 1.2M USIndianLands.RData
 *  17M WorldTimezones.RData</code></pre>
<p>Further details about each dataset are provided in the associated <code>convert~()</code> function. Datasets appearing with, <em>e.g.</em>, <code>_05</code> are simplified datasets whose polygons retain only 5% of the vertices of the original .</p>
</div>
<div id="additional-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-datasets" class="anchor"></a>Additional Datasets</h3>
<p>Mazama Science regularly generates new datasets that adhere to package standards. These can be download manually from <a href="http://mazamascience.com/RData/Spatial/" class="uri">http://mazamascience.com/RData/Spatial/</a>. As of Jan 10, 2019, the full list of available datasets includes:</p>
<pre><code> * 24K  CA_AirBasins_01.RData
 * 44K  CA_AirBasins_02.RData
 * 100K CA_AirBasins_05.RData
 * 2.1M CA_AirBasins.RData
 * 2.2M EEZCountries.RData
 * 404K GACC_05.RData
 * 7.0M GACC.RData
 * 15M  NaturalEarthAdm1.RData
 * 3.1M OSMTimezones_05.RData
 * 62M  OSMTimezones.RData
 * 3.6M TerrestrialEcoregions_05.RData
 * 49M  TerrestrialEcoregions.RData
 * 3.7M TMWorldBorders.RData
 * 7.6M USCensus115thCongress.RData
 * 564K USCensusCBSA_01.RData
 * 944K USCensusCBSA_02.RData
 * 2.0M USCensusCBSA_05.RData
 * 34M  USCensusCBSA.RData
 * 2.3M USCensusCounties.RData
 * 3.5M USCensusStates.RData
 * 1.2M USIndianLands.RData
 * 769M WBDHU10.RData
 * 1.5G WBDHU12.RData
 * 424K WBDHU2_01.RData
 * 840K WBDHU2_02.RData
 * 38M  WBDHU2.RData
 * 1.1M WBDHU4_01.RData
 * 2.2M WBDHU4_02.RData
 * 108M WBDHU4.RData
 * 1.4M WBDHU6_01.RData
 * 2.8M WBDHU6_02.RData
 * 137M WBDHU6.RData
 * 295M WBDHU8.RData
 * 18M  WorldTimezones.RData</code></pre>
</div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="vignettes" class="section level3">
<h3 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h3>
<p>The package vignette ‘Introduction to MazamaSpatialUtils’ has numerous examples.</p>
</div>
<div id="demos" class="section level3">
<h3 class="hasAnchor">
<a href="#demos" class="anchor"></a>Demos</h3>
<p>There are three demos associated with the package:</p>
<pre><code><a href="https://rdrr.io/r/utils/demo.html">demo(package = 'MazamaSpatialUtils')</a></code></pre>
</div>
<div id="shiny-app" class="section level3">
<h3 class="hasAnchor">
<a href="#shiny-app" class="anchor"></a>Shiny App</h3>
<p>There is also an exampe R Shiny app which uses the <code>WBDHU#</code> datasets combines two large datasets:</p>
<ul>
<li>location data from the National Bridge Inventory</li>
<li>shapefiles from the Watershed Boundary Dataset</li>
</ul>
<p>The app allows you to aggregate point location data by watershed to create summary values associated with each watershed. It also demonstrates the need to enable caching in a shiny app when plots take a long time to generate.</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library(MazamaSpatialUtils)
setSpatialDataDir('~/Data/Spatial')
runExample()</a></code></pre>
</div>
<div id="mapshaper" class="section level3">
<h3 class="hasAnchor">
<a href="#mapshaper" class="anchor"></a>Mapshaper</h3>
<p>Instructions for installing the javascript <code>mapshaper</code> utility and using it to simplify large shapefiles are found in the <code>localMapshaper/</code> directory.</p>
<hr>
<p>This project is supported by Mazama Science.</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=MazamaSpatialUtils">https://​cloud.r-project.org/​package=MazamaSpatialUtils</a>
</li>
<li>Browse source code at <br><a href="https://github.com/MazamaScience/MazamaSpatialUtils">https://​github.com/​MazamaScience/​MazamaSpatialUtils</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MazamaScience/MazamaSpatialUtils/issues">https://​github.com/​MazamaScience/​MazamaSpatialUtils/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jonathan Callahan <br><small class="roles"> Author, maintainer </small>  </li>
<li>Tom Bergamaschi <br><small class="roles"> Author </small>  </li>
<li>Ruby Fore <br><small class="roles"> Author </small>  </li>
<li>Will Leahy <br><small class="roles"> Author </small>  </li>
<li>Helen Miller <br><small class="roles"> Author </small>  </li>
<li>Henry Nguyen <br><small class="roles"> Author </small>  </li>
<li>Robin Winstanley <br><small class="roles"> Author </small>  </li>
<li>Alice Yang <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Tom Bergamaschi, Ruby Fore, Will Leahy, Helen Miller, Henry Nguyen, Robin Winstanley, Alice Yang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
